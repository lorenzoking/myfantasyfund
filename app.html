<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="/" />
    <title>Bitcoin Fund</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/styles.css" />
    <meta property="og:image" content="https://myfantasyfund.com/logo/hndshkversionlogo.png" />
    <meta name="twitter:image" content="https://myfantasyfund.com/logo/hndshkversionlogo.png" />
    <link rel="icon" href="/logo/hndshkversionlogo.png" />
    <link rel="apple-touch-icon" href="/logo/hndshkversionlogo.png" />
  </head>
  <body class="league">
    <div class="container">
      <header class="header">
        <div class="title-row">
          <a href="/" class="logo-link" aria-label="myfantasyfund home" rel="home">
            <img src="/logo/hndshkversionlogo.png" alt="myfantasyfund" class="logo-img" />
          </a>
          <h1><span id="titleLeagueName">League</span> Bitcoin Fund</h1>
          <div class="title-actions">
            <button id="refreshBtn" class="btn ghost" title="Refresh now">↻ Refresh</button>
          </div>
        </div>
        <p class="subtitle">Live fund balance, BTC price, and long-term growth projections.</p>
      </header>

      <section class="card">
        <div class="card-header">
          <h2>Fund Address</h2>
        </div>
        <div class="card-body address-grid">
          <div class="address-inputs">
            <input id="addressInput" type="text" placeholder="Enter Bitcoin address (bc1...)" autocomplete="off" spellcheck="false" />
            <div class="actions">
              <button id="saveAddressBtn" class="btn primary">Save Address</button>
              <button id="clearAddressBtn" class="btn danger ghost">Clear</button>
            </div>
          </div>
          <div class="address-meta">
            <div class="meta-row">
              <span class="meta-label">Current address</span>
              <a id="addressDisplay" class="meta-value" href="#" target="_blank" rel="noopener">Not set</a>
            </div>
            <div class="meta-row">
              <span class="meta-label">Last updated</span>
              <span id="lastUpdated" class="meta-value">—</span>
            </div>
          </div>
        </div>
      </section>

      <section class="grid">
        <div class="card">
          <div class="card-header">
            <h2>Live Snapshot</h2>
          </div>
          <div class="card-body kpis">
            <div class="kpi">
              <div class="kpi-label">BTC Price (USD)</div>
              <div id="btcPrice" class="kpi-value">—</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Fund Balance (BTC)</div>
              <div id="btcBalance" class="kpi-value">—</div>
              <div class="kpi-sub" id="satsBalance">— sats</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Fund Value (USD)</div>
              <div id="usdValue" class="kpi-value accent">—</div>
            </div>
          </div>
          <div class="card-body">
            <p class="help-text small" style="margin-top:0">Fund Value is simply your BTC amount multiplied by the current Bitcoin price.
            This view updates about every minute.</p>
            <div class="horiz"></div>
            <h3 class="small" style="margin: 0 0 8px; color: var(--muted);">BTC Price (Last 12 Months)</h3>
            <div class="chart-wrap"><canvas id="linePriceChart"></canvas></div>
          </div>
          <div class="card-footer small">Data auto-refreshes every 60s. Values approximate.</div>
        </div>

        <div class="card card-analyzer">
          <div class="card-header">
            <h2>AI Rankings Analyzer</h2>
          </div>
          <div class="card-body">
            <div class="upload-section">
              <div class="year-selector">
                <label for="uploadYearSelect" class="control-label">Select Year</label>
                <select id="uploadYearSelect">
                  <option value="2024">2024</option>
                  <option value="2023">2023</option>
                  <option value="2022">2022</option>
                  <option value="2021">2021</option>
                  <option value="2020">2020</option>
                </select>
              </div>
              <label for="standingsImageInput" class="control-label">Upload Standings Screenshot</label>
              <input id="standingsImageInput" type="file" accept="image/*" />
              <p class="help-text small">Upload a screenshot of your current fantasy standings. AI will analyze it to extract team rankings.</p>
              <button id="analyzeStandingsBtn" class="btn primary">Analyze Standings</button>
            </div>
            <div class="horiz"></div>
            <div class="debug-wrap">
              <div class="debug-header">
                <div class="mini-label">Debug JSON (copy into your league’s rankings.json)</div>
                <button id="copyAiJsonBtn" class="btn">Copy JSON</button>
              </div>
              <textarea id="aiDebugJson" readonly rows="10" style="width:100%; resize:vertical;"></textarea>
            </div>
          </div>
        </div>

        <div class="card card-payouts">
          <div class="card-header">
            <h2>Prize Payouts</h2>
          </div>
          <div class="card-body">
            <div class="table-wrap">
              <table class="proj-table">
                <thead>
                  <tr><th style="text-align:left">Place</th><th>Percent</th><th style="text-align:right">Payout</th></tr>
                </thead>
                <tbody id="payoutsTable"></tbody>
              </table>
            </div>
            <p class="help-text small">Bitcoin amounts stay constant - USD values fluctuate with price. Stack sats and the dollars will come...</p>
          </div>
        </div>
        <div class="card card-power">
          <div class="card-header">
            <h2>2024 Power Rankings</h2>
          </div>
          <div class="card-body">
            <div class="table-wrap">
              <table class="proj-table">
                <thead>
                  <tr><th style="text-align:left">Rank</th><th style="text-align:left">Team</th><th>Record</th></tr>
                </thead>
                <tbody id="rankingsTable"></tbody>
              </table>
            </div>
            <p class="help-text small">Updated automatically from your league’s `rankings.json`.</p>
          </div>
        </div>
        <div class="card card-growth">
          <div class="card-header">
            <h2>Growth Projection</h2>
          </div>
          <div class="card-body">
            <div class="controls">
              <label for="cagrInput" class="control-label">Average yearly growth (CAGR)</label>
              <div class="cagr-controls">
                <input id="cagrRange" type="range" min="0" max="200" step="1" value="50" />
                <div class="cagr-number">
                  <input id="cagrInput" type="number" min="0" max="200" step="1" value="50" />
                  <span>%</span>
                </div>
              </div>
              <p class="help-text small">This sets the average percentage your fund grows each year. Try changing it to see how the fund could grow over time. For context, Bitcoin’s average annualized return over the last ~10 years is about 80%.</p>
            </div>

            <div class="chart-wrap">
              <canvas id="projectionChart" height="140"></canvas>
            </div>
            <div class="horiz"></div>
            <div class="table-wrap">
              <table class="proj-table">
                <thead>
                  <tr><th>Year</th><th>BTC Price</th><th>Fund Value</th></tr>
                </thead>
                <tbody id="projectionTableBody"></tbody>
              </table>
            </div>
            <p class="help-text small">These are simple estimates using the growth setting above. They aren’t predictions—just a way to visualize what could happen if Bitcoin grows by that average rate each year.</p>
            <div class="horiz"></div>
            <div class="horiz-cards">
              <div class="mini-card">
                <div class="mini-label">Fund Value in 5 years</div>
                <div id="p5" class="mini-value">—</div>
              </div>
              <div class="mini-card">
                <div class="mini-label">Fund Value in 10 years</div>
                <div id="p10" class="mini-value">—</div>
              </div>
              <div class="mini-card">
                <div class="mini-label">Fund Value in 15 years</div>
                <div id="p15" class="mini-value">—</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="footer small">
        <span>Built for the squad. This is not financial advice.</span>
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script src="/app.js" type="module"></script>
  </body>
  </html>


